<div class="field">
  <div class="header">
    <button (click)="toggleStore()" class="button">{{openStore ? 'Close store' : 'Open store'}}</button>
    <div class="wallet float-right">{{currency}} x<img src="assets/images/{{currencyImage}}" class="currency-image" alt="image"></div>
    <div class="wallet float-right" (click)="buyCoins()">{{coinCurrency}} x<img src="../../../assets/images/unicefcoin.png" class="currency-image" alt="image"></div>
  </div>
  <div class="progress">
    <div class="progress-bar bg-unicef" role="progressbar" [ngStyle]="{'width.%': getProgress()}">Level {{getLevel()}}</div>
  </div>
  <app-stage-view *ngIf="!openStore; else store" (increase)="increaseCurrency()"></app-stage-view>

  <ng-template #store>
    <app-stage-store
      (purchase)="commitPurchase($event)"
      [currency]="currency"
      [facilities]="getAvailableFacilities()"
      [upgrades]="getAvailableUpgrades()"
    ></app-stage-store>
  </ng-template>
</div>
